<form autocomplete="off"
      class="form-container">


  <!-- Informaci贸n -->
  <div class="secForm">
    <div class="secSeparador">
      <div class="linea"></div>
      <div class="separadorLabel">Informaci贸n</div>
    </div>

    <!-- Titulo Actividad -->
    <mat-form-field class="nmn-FormField mb-05" appearance="outline">
      <mat-label>Titulo de actividad</mat-label>
      <input matInput
             required
             [(ngModel)]="nuevaActividad_envio.nombre"
             name="nombre">
    </mat-form-field>

    <!-- Fecha y colaborador -->
    <div class="inputWrapper doble mb-05">
      <mat-form-field appearance="outline" class="fechaInputContainer nmn-FormField">
        <mat-label>Fecha</mat-label>
        <input matInput 
          required
          [matDatepicker]="picker" 
          [(ngModel)]="actividad.fecha" name="fecha">
        <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
        <mat-datepicker #picker></mat-datepicker>
      </mat-form-field>
  
      <mat-form-field appearance="outline" class="nmn-FormField">
        <mat-label>Colaborador</mat-label>
        <mat-select [formControl]="colaboradoresAsignados" multiple>
          <mat-option select="true" *ngFor="let colaborador of colaboradores;" [value]="colaborador.id">{{colaborador.nombre}}</mat-option>
        </mat-select>
      </mat-form-field>
    </div>

    <!-- Cliente/Proyecto -->
    <mat-form-field class="nmn-FormField mb-05" appearance="outline">
      <mat-label *ngIf="cliProySeleccionado.nombreCliente">{{cliProySeleccionado.nombreCliente}}</mat-label>
      <mat-label *ngIf="cliProySeleccionado.nombreCliente == null">Cliente / Proyecto</mat-label>
      <select matNativeControl
              (change)="cambiaClienteProyecto($event)">
        <option value="" selected>Selecciona un proyecto</option>
        <optgroup *ngFor="let cliente of clientesProyecto" [label]="cliente.razon_social">
          <option *ngFor="let proyecto of cliente.proyectos" [value]="[cliente.razon_social,proyecto._id, cliente.id]">
            {{proyecto.nombre}}
          </option>
        </optgroup>
      </select>
    </mat-form-field>

    <!-- Descripci贸n -->
    <mat-form-field appearance="outline" class="nmn-FormField">
      <mat-label>Descripci贸n</mat-label>
      <textarea matInput
                [(ngModel)]="nuevaActividad_envio.descripcion"
                name="descripcion"></textarea>
    </mat-form-field>
  </div>

  <!-- Tiempo -->
  <div class="secForm">
    <div class="secSeparador">
      <div class="linea"></div>
      <div class="separadorLabel">Tiempo</div>
    </div>

    <div class="inputWrapper tiempo">
      <mat-form-field appearance="outline" class="nmn-FormField">
        <mat-label>Inicio</mat-label>
        <input matInput
        type="time"
        [(ngModel)]="nuevaActividad_envio.tiempoInicio"
        (change)="restaTiempos()"
        name="tiempoInicio">
      </mat-form-field>
  
      <mat-form-field appearance="outline" class="nmn-FormField">
        <mat-label>Fin</mat-label>
        <input matInput
        type="time"
        [(ngModel)]="nuevaActividad_envio.tiempoFinal"
        (change)="restaTiempos()"
        name="tiempoFinal">
      </mat-form-field>
  
      <div class="totalWrapper">
        <div class="label">Tiempo Total:</div>
        <div class="tiempo">{{tiempoAcumulado.resHor + ':' + tiempoAcumulado.resMin + ':' + tiempoAcumulado.resSeg}}</div>
      </div>
  
      <!-- <mat-form-field appearance="outline" class="edicionInput total">
        <mat-label>Total</mat-label>
        <input matInput
        type="text"
        disabled
        [value]="tiempoAcumulado.resHor + ':' + tiempoAcumulado.resMin + ':' + tiempoAcumulado.resSeg"
        name="tiempoAcumulado">
      </mat-form-field> -->
    </div>
  </div>


  <!-- CheckList -->
  <div class="secForm">
    <div class="secSeparador">
      <div class="linea"></div>
      <div class="separadorLabel">Check List</div>
    </div>
  
    <div *ngIf=" actividad.lista.length != 0" class="listWrapp">
  
    <mat-selection-list>
  
      <div class="optionCheckWrapp" *ngFor="let dato of actividad.lista; let i = index">
        <mat-list-option class="form-check" [ngClass]="{'checked': dato.estatus}" [value]="dato.estatus" [selected]="dato.estatus" (click)="checkElemento(i)">
          {{ dato.contenido }}
        </mat-list-option>
        <button mat-icon-button class="btnEliminarCheck" (click)="eliminarElemento(i)">
          <mat-icon>delete</mat-icon>
        </button>
      </div>
  
    </mat-selection-list>
  
    </div>
  
    <form class="agregarCheckWrapp" (ngSubmit)="agregarCheckList()">
      <mat-form-field class="check-FormField" appearance="outline">
        <mat-label>Agregar Elemento</mat-label>
        <input 
          matInput 
          [(ngModel)]="nuevo.contenido"
          name="contenido">

        <button mat-icon-button type="submit" color="primary">
          <mat-icon>add</mat-icon>
        </button>
      </mat-form-field>
  
      <div class="checkList-2">
        
      </div>
    </form>
  </div>
  

  <div class="footer">
    

    <div class="cont uno">

    </div>

    <div class="cont dos">
      <mat-slide-toggle class="example-margin" color="warn" [(ngModel)]="nuevaActividad_envio.prioridadAlta" name="prioridadAlta">Prioridad alta</mat-slide-toggle>
      <!-- <button mat-raised-button color="warn" type="button" (click)="cancelarActividad()">Cancelar</button> -->
      <div class="botones">
        <button mat-raised-button
        (click)="crearNuevaActividad(false)"
        color="accent"
        type="submit"
        [disabled]="
          nuevaActividad_envio.nombre === '' ||
          colaboradoresAsignados.value?.length == 0 ||
          nuevaActividad_envio.cliente === '' ||
          nuevaActividad_envio.proyecto === '' " >Guardar</button>
  
        <button mat-raised-button
        (click)="crearNuevaActividad(true)"
        color="basic"
        type="submit"
        class="button2"
        [disabled]="
          nuevaActividad_envio.nombre === '' ||
          colaboradoresAsignados.value?.length == 0 ||
          nuevaActividad_envio.cliente === '' ||
          nuevaActividad_envio.proyecto === '' ||
          nuevaActividad_envio.tiempoInicio !== '' || 
          nuevaActividad_envio.tiempoFinal !== '' " >Guardar e Iniciar</button>
      </div>
    </div>

  </div>
</form>





